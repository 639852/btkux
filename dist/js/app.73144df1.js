(function(e){function t(t){for(var a,o,l=t[0],u=t[1],i=t[2],p=0,d=[];p<l.length;p++)o=l[p],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);c&&c(t);while(d.length)d.shift()();return s.push.apply(s,i||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,l=1;l<r.length;l++){var u=r[l];0!==n[u]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},s=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var i=0;i<l.length;i++)t(l[i]);var c=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"09db":function(e,t,r){"use strict";r("e9c3")},"56d7":function(e,t,r){"use strict";r.r(t);var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",[r("Form"),r("Products")],1)},s=[],o=(r("ab8b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"container mb-5"},[r("h2",[e._v("Первое задание")]),r("form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.placeAnOrder.apply(null,arguments)}}},[e._l(e.params,(function(t,a){return r("FormInput",{key:a,attrs:{param:t,errors:e.errors},on:{bindValue:e.bindValue}})})),r("FormButton",{attrs:{text:"Отправить"}})],2)])}),l=[],u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-group"},[r("label",{staticClass:"d-block"},[r("div",{staticClass:"mb-2"},[e._v(e._s(e.param.header))]),"textarea"===e.param.inputType?r("textarea",{staticClass:"form-control"}):"checkbox"===e.param.inputType?r("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"form-control",class:{"is-invalid":e.param.isInvalid},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{input:function(t){return e.bindValue(e.param.typeValue)},change:function(t){var r=e.value,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=e._i(r,s);a.checked?o<0&&(e.value=r.concat([s])):o>-1&&(e.value=r.slice(0,o).concat(r.slice(o+1)))}else e.value=n}}}):"radio"===e.param.inputType?r("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"form-control",class:{"is-invalid":e.param.isInvalid},attrs:{type:"radio"},domProps:{checked:e._q(e.value,null)},on:{input:function(t){return e.bindValue(e.param.typeValue)},change:function(t){e.value=null}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"form-control",class:{"is-invalid":e.param.isInvalid},attrs:{type:e.param.inputType},domProps:{value:e.value},on:{input:[function(t){t.target.composing||(e.value=t.target.value)},function(t){return e.bindValue(e.param.typeValue)}]}}),e.param.isInvalid?r("div",{staticClass:"invalid-feedback"},[e._v(" "+e._s(e.changeError)+" ")]):e._e()])])},i=[],c={props:["param","errors"],data(){return{value:""}},computed:{changeError(){const e=this.param.typeValue;return this.errors[e]}},methods:{bindValue(e){this.$emit("bindValue",e,this.value),this.param.isInvalid=!1}}},p=c,d=r("2877"),m=Object(d["a"])(p,u,i,!1,null,null,null),v=m.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v(e._s(e.text))])},h=[],b={props:["text"]},y=b,_=Object(d["a"])(y,f,h,!1,null,null,null),g=_.exports,x=r("bc3a"),C=r.n(x),O={data(){return{params:[{header:"Представьтесь",inputType:"text",typeValue:"name",isInvalid:!1},{header:"Адрес доставки",inputType:"text",typeValue:"address",isInvalid:!1},{header:"Телефон",inputType:"tel",typeValue:"phone",isInvalid:!1},{header:"Эл. почта",inputType:"email",typeValue:"email",isInvalid:!1},{header:"Комментарий",inputType:"textarea",typeValue:"comment",isInvalid:!1}],errors:{},user:{name:"",address:"",phone:"",email:"",comment:""}}},components:{FormInput:v,FormButton:g},methods:{placeAnOrder(){C.a.get("https://vue-study.skillbox.cc/api/users/accessKey").then(e=>C.a.post("https://vue-study.skillbox.cc/api/orders",this.user,{params:{userAccessKey:e.data.accessKey}})).then(()=>{alert("Ваш заказ успешно оформлен!"),this.$refs.form.reset()}).catch(e=>{const t=e.response.data.error.message;t&&alert("Возникла ошибка: "+t+"!"),this.errors=e.response.data.error.request;for(let r=0;r<this.params.length;r++){const e=this.params[r].typeValue;for(let t in this.errors)t===e&&(this.params[r].isInvalid=!0)}})},bindValue(e,t){this.user[e]=t,delete this.errors[e]}}},k=O,V=Object(d["a"])(k,o,l,!1,null,null,null),I=V.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"container mb-5"},[r("h2",[e._v("Второе задание + дополнительное")]),r("div",{staticClass:"product-cards"},e._l(e.productsItems,(function(e,t){return r("ProductCard",{key:t,attrs:{product:e}})})),1)])},j=[],w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"product-cards__item product"},[r("img",{staticClass:"product__img",attrs:{src:e.product.image.file.url,alt:"Название"}}),r("div",{staticClass:"product__content"},[r("h5",{staticClass:"product__name"},[e._v(e._s(e.product.title))]),r("h6",{staticClass:"product__price"},[e._v(" "+e._s(e.product.price.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1 ")+" ₽")+" ")]),e._l(e.product.colors,(function(t,a){return r("a",{key:a,staticClass:"product__link",style:{color:t.code},attrs:{href:"#"}},[e._v(e._s(t.title))])}))],2)])},T=[],$={props:["product"]},A=$,E=(r("eeb0"),Object(d["a"])(A,w,T,!1,null,"4fc5e4f6",null)),F=E.exports,S={components:{ProductCard:F},data(){return{products:null}},computed:{productsItems(){return this.products}},methods:{getProducts(e){C.a.get("https://vue-study.skillbox.cc/api/products",{params:{categoryId:e}}).then(e=>this.products=e.data.items).catch(e=>alert("Возникла ошибка: "+e.message))}},mounted(){this.getProducts(3)}},M=S,K=(r("09db"),Object(d["a"])(M,P,j,!1,null,"17e71b80",null)),N=K.exports,q={name:"App",components:{Form:I,Products:N}},B=q,J=Object(d["a"])(B,n,s,!1,null,null,null),D=J.exports;a["a"].config.productionTip=!1,new a["a"]({render:e=>e(D)}).$mount("#app")},e9c3:function(e,t,r){},ecc7:function(e,t,r){},eeb0:function(e,t,r){"use strict";r("ecc7")}});
//# sourceMappingURL=app.73144df1.js.map